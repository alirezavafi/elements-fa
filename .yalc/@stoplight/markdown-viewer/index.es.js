import{Heading as e,LinkHeading as r,Code as t,InvertTheme as n,Tabs as o,TabList as s,Tab as a,TabPanels as l,TabPanel as i,Box as c,Flex as m,Icon as u,Prose as p}from"@stoplight/mosaic";import{ErrorBoundary as g}from"@stoplight/react-error-boundary";import{createElement as d,Children as b,Fragment as h,useMemo as f}from"react";import{CodeViewer as y}from"@stoplight/mosaic-code-viewer";import{remarkParsePreset as v,parse as O}from"@stoplight/markdown";import k from"deepmerge";import{sanitize as j,defaultSchema as w}from"hast-util-sanitize";import z from"rehype-raw";import N from"rehype-react";import S from"remark-parse";import E from"remark-rehype";import P from"unified";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function C(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t}const F=e=>{switch(e){case"http":return"yaml";default:return e}},q={a:e=>{var{href:r}=e,t=C(e,["href"]);return r?r.startsWith("/")?d("a",Object.assign({href:r},t)):d("a",Object.assign({href:r,target:"_blank",rel:"noopener noreferrer"},t)):null},h1:r=>{var t=C(r,["color"]);return d(e,Object.assign({size:1},t))},h2:e=>{var t=C(e,["color"]);return d(r,Object.assign({size:2},t))},h3:e=>{var t=C(e,["color"]);return d(r,Object.assign({size:3},t))},h4:e=>{var t=C(e,["color"]);return d(r,Object.assign({size:4},t))},h5:r=>{var t=C(r,["color"]);return d(e,Object.assign({size:4},t))},h6:r=>{var t=C(r,["color"]);return d(e,Object.assign({size:4},t))},blockquote:({theme:e,children:r})=>d("blockquote",{className:"sl-blockquote--"+(e||"default")},r),code:({children:e,inline:r,lineNumbers:o,title:s,lang:a})=>void 0!==r?d(t,null,e):d(g,null,d(n,null,d(y,{bg:"canvas",value:String(e),language:F(String(a)),rounded:"lg",ring:{focus:!0},ringColor:"primary",ringOpacity:50,showLineNumbers:void 0!==o,title:s}))),tabs:e=>d(o,{appearance:"line"},d(s,null,b.map(e.children,(e,r)=>d(a,{key:r},e.props.title))),d(l,null,b.map(e.children,(e,r)=>d(i,{key:r},e)))),tab:({children:e})=>d(h,null,e),codegroup:e=>d(c,{className:"sl-code-group"},d(o,null,d(m,{alignItems:"center"},d(c,{mr:4,ml:1},d(u,{icon:["far","code"],size:"sm"})),d(s,{fontSize:"lg",density:"compact"},b.map(e.children,(e,r)=>{var t,n;let o=null===(t=e.props)||void 0===t?void 0:t.children;return o=Array.isArray(o)?o[0]:o,d(a,{key:r},(null===(n=null==o?void 0:o.props)||void 0===n?void 0:n.lang)||"untitled")}))),d(l,{p:1},b.map(e.children,(e,r)=>d(i,{key:r},e)))))};function x(e){return function(r){return j(r,e)}}let A=null;const D=()=>(A||(A=k(w,{tagNames:["tabs","tab","codegroup","button"],attributes:{"*":["className","style"],code:["title","lineNumbers","inline","highlightLines","lang","live","jsonSchema","http","resolved"],blockquote:["theme"]}})),A),H=(e,r={})=>{const t=V(r).use(N,{createElement:d,Fragment:h,components:r.components});return t.stringify(t.runSync(e))},I=(e,r={})=>M(r).use(N,{createElement:d,Fragment:h,components:r.components}).processSync(e).result,L=O,M=(e={})=>P().use(S).use(v).use(e.remarkPlugins||[]).use(E,{allowDangerousHtml:!0}).use(z).use(x,D()).use(e.rehypePlugins||[]).data("settings",e.settings),V=(e={})=>P().use(E,{allowDangerousHtml:!0}).use(z).use(x,D()).use(e.rehypePlugins||[]).data("settings",e.settings),W=(e,r={})=>f(()=>"string"==typeof e?I(e,r):H(e,r),[e,r]),_=e=>{var{onError:r,FallbackComponent:t=J}=e,n=C(e,["onError","FallbackComponent"]);return d(g,{onError:r,FallbackComponent:t},d(G,Object.assign({},n)))};_.displayName="MarkdownViewer";const B={},G=e=>{var{markdown:r,parseOptions:t={},color:n}=e,o=C(e,["markdown","parseOptions","color"]);const s=(null==t?void 0:t.components)||B,a=f(()=>Object.assign(Object.assign({},q),s),[s]),l=W(r,Object.assign(Object.assign({},t),{components:a}));return d(p,Object.assign({className:"sl-markdown-viewer"},o),l)};G.displayName="MarkdownViewer.Component";const J=({error:e})=>d(c,{p:4},d("b",null,"Error"),e&&": "+e.message);export{q as DefaultSMDComponents,_ as MarkdownViewer,D as buildSanitizationSchema,I as markdown2React,H as mdast2React,L as parse,W as useMarkdownTree};
