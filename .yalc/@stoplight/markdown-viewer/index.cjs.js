"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@stoplight/mosaic"),t=require("@stoplight/react-error-boundary"),n=require("react"),a=require("@stoplight/mosaic-code-viewer"),l=require("@stoplight/markdown"),o=e(require("deepmerge")),s=require("hast-util-sanitize"),i=e(require("rehype-raw")),c=e(require("rehype-react")),u=e(require("remark-parse")),m=e(require("remark-rehype")),p=e(require("unified"));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function d(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t}const g=e=>{switch(e){case"http":return"yaml";default:return e}},b={a:e=>{var{href:r}=e,t=d(e,["href"]);return r?r.startsWith("/")?n.createElement("a",Object.assign({href:r},t)):n.createElement("a",Object.assign({href:r,target:"_blank",rel:"noopener noreferrer"},t)):null},h1:e=>{var t=d(e,["color"]);return n.createElement(r.Heading,Object.assign({size:1},t))},h2:e=>{var t=d(e,["color"]);return n.createElement(r.LinkHeading,Object.assign({size:2},t))},h3:e=>{var t=d(e,["color"]);return n.createElement(r.LinkHeading,Object.assign({size:3},t))},h4:e=>{var t=d(e,["color"]);return n.createElement(r.LinkHeading,Object.assign({size:4},t))},h5:e=>{var t=d(e,["color"]);return n.createElement(r.Heading,Object.assign({size:4},t))},h6:e=>{var t=d(e,["color"]);return n.createElement(r.Heading,Object.assign({size:4},t))},blockquote:({theme:e,children:r})=>n.createElement("blockquote",{className:"sl-blockquote--"+(e||"default")},r),code:({children:e,inline:l,lineNumbers:o,title:s,lang:i})=>void 0!==l?n.createElement(r.Code,null,e):n.createElement(t.ErrorBoundary,null,n.createElement(r.InvertTheme,null,n.createElement(a.CodeViewer,{bg:"canvas",value:String(e),language:g(String(i)),rounded:"lg",ring:{focus:!0},ringColor:"primary",ringOpacity:50,showLineNumbers:void 0!==o,title:s}))),tabs:e=>n.createElement(r.Tabs,{appearance:"line"},n.createElement(r.TabList,null,n.Children.map(e.children,(e,t)=>n.createElement(r.Tab,{key:t},e.props.title))),n.createElement(r.TabPanels,null,n.Children.map(e.children,(e,t)=>n.createElement(r.TabPanel,{key:t},e)))),tab:({children:e})=>n.createElement(n.Fragment,null,e),codegroup:e=>n.createElement(r.Box,{className:"sl-code-group"},n.createElement(r.Tabs,null,n.createElement(r.Flex,{alignItems:"center"},n.createElement(r.Box,{mr:4,ml:1},n.createElement(r.Icon,{icon:["far","code"],size:"sm"})),n.createElement(r.TabList,{fontSize:"lg",density:"compact"},n.Children.map(e.children,(e,t)=>{var a,l;let o=null===(a=e.props)||void 0===a?void 0:a.children;return o=Array.isArray(o)?o[0]:o,n.createElement(r.Tab,{key:t},(null===(l=null==o?void 0:o.props)||void 0===l?void 0:l.lang)||"untitled")}))),n.createElement(r.TabPanels,{p:1},n.Children.map(e.children,(e,t)=>n.createElement(r.TabPanel,{key:t},e)))))};function h(e){return function(r){return s.sanitize(r,e)}}let E=null;const y=()=>(E||(E=o(s.defaultSchema,{tagNames:["tabs","tab","codegroup","button"],attributes:{"*":["className","style"],code:["title","lineNumbers","inline","highlightLines","lang","live","jsonSchema","http","resolved"],blockquote:["theme"]}})),E),f=(e,r={})=>{const t=w(r).use(c,{createElement:n.createElement,Fragment:n.Fragment,components:r.components});return t.stringify(t.runSync(e))},v=(e,r={})=>O(r).use(c,{createElement:n.createElement,Fragment:n.Fragment,components:r.components}).processSync(e).result,k=l.parse,O=(e={})=>p().use(u).use(l.remarkParsePreset).use(e.remarkPlugins||[]).use(m,{allowDangerousHtml:!0}).use(i).use(h,y()).use(e.rehypePlugins||[]).data("settings",e.settings),w=(e={})=>p().use(m,{allowDangerousHtml:!0}).use(i).use(h,y()).use(e.rehypePlugins||[]).data("settings",e.settings),j=(e,r={})=>n.useMemo(()=>"string"==typeof e?v(e,r):f(e,r),[e,r]),q=e=>{var{onError:r,FallbackComponent:a=C}=e,l=d(e,["onError","FallbackComponent"]);return n.createElement(t.ErrorBoundary,{onError:r,FallbackComponent:a},n.createElement(P,Object.assign({},l)))};q.displayName="MarkdownViewer";const x={},P=e=>{var{markdown:t,parseOptions:a={},color:l}=e,o=d(e,["markdown","parseOptions","color"]);const s=(null==a?void 0:a.components)||x,i=n.useMemo(()=>Object.assign(Object.assign({},b),s),[s]),c=j(t,Object.assign(Object.assign({},a),{components:i}));return n.createElement(r.Prose,Object.assign({className:"sl-markdown-viewer"},o),c)};P.displayName="MarkdownViewer.Component";const C=({error:e})=>n.createElement(r.Box,{p:4},n.createElement("b",null,"Error"),e&&": "+e.message);exports.DefaultSMDComponents=b,exports.MarkdownViewer=q,exports.buildSanitizationSchema=y,exports.markdown2React=v,exports.mdast2React=f,exports.parse=k,exports.useMarkdownTree=j;
